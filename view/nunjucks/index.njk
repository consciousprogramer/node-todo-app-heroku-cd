{% extends "nunjucks/layout.njk" %}

{% block title %}
    {{pageTitle}}
{% endblock %}

{% block css %}
    
{% endblock %}

{% block body %}
    {% include './components/navbar.njk' %}
    <div class="container">
    {% if error %}
        <div class="alert alert-danger" role="alert">
            {{errorMsg}}
        </div>
    {% endif %}
        <h1 class="py-5 text-center">To-do app</h1>
        <div class="container-fluid mx-4 rounded bg-light py-3">
            <div class="all-tasks py-3">
                {% if empty %}
                    <h1 class="p-3 shadow-sm rounded">No Task</h1>
                {% else %}
                    {% for task in tasks %}
                        <div class="p-2 shadow-sm my-3 rounded bg-white">
                            <h3 class="text-right">{{task.title}}</h1>
                            <div class="d-flex justify-content-between text-secondary">
                                <div class="ml-auto pl-2 ">
                                    <h6 class="text-secondary text-left d-inline-block ml-1 fw-light">status: {{task.completed}}</h6>
                                    <h6 class="text-secondary text-left d-inline-block mr-1 fw-normal">{{task.date}}</h6>
                                </div>
                                <div class="mr-auto pr-2">
                                    <a class="btn btn-sm btn-success d-inline-block mx-2" href='/edit-task/{{task._id}}'>
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                    <a class="btn btn-sm btn-danger d-inline-block mx-2" href='/delete-task/{{task._id}}'>
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="mt-3 py-2">
                <form action="/new-task" method="post" class='d-flex flex-row justify-content-around'>
                    <div class="flex-grow-1 p-2">
                        <input type="text" class="form-control" id="title" name='title' placeholder="Enter task">
                    </div>
                    <div class="p-2 flex-shrink-0 d-flex align-items-end">
                        <button class='btn btn-primary' type='submit'>ADD TASK</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    
{% endblock %}